---
lang: zh-CN
title: 7.6 Scripting and Programming
description: some description
---

## Section 7.6 Scripting and Programming

As you study this section, answer the following questions:

- What are scripts used for?
- What is a variable in a script?
- What are some shell processor types?
- What program is used in Windows to execute scripts?
- What is the software development life cycle?
- What are the two approaches to reverse engineering?

In this section, you will learn to:

- Identify programming languages
- Explain the software development life cycle
- Perform reverse engineering

The key terms for this section include:

**Key Terms and Definitions**

<table class="terms">
<caption>
  Key Terms and Definitions
</caption>
<thead>
  <tr>
    <th>Term</th>
    <th>Definition</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>Shell scripts</td>
    <td>
      Allows users and administrators to automate tasks using a scripting
      language like Bash or PowerShell.
    </td>
  </tr>
  <tr>
    <td>Variables</td>
    <td>
      Holds reusable dynamic values and are foundational to the use of
      scripts.
    </td>
  </tr>
  <tr>
    <td>Boolean operators</td>
    <td>Used to perform comparisons in scripts.</td>
  </tr>
  <tr>
    <td>Metacharacters</td>
    <td>
      Characters that have special meaning to a computer program, such as
      shell.
    </td>
  </tr>
  <tr>
    <td>Redirection</td>
    <td>
      Allows for the output of commands to be sent to other locations,
      such as a file or another program.
    </td>
  </tr>
  <tr>
    <td>PowerShell</td>
    <td>Windows program used to develop and execute scripts.</td>
  </tr>
  <tr>
    <td>Extensible Markup Language (XML)</td>
    <td>
      A text-based markup language like HTML that uses tags derived from
      Standard Generalized Markup Language (SGML). XML is used to transfer
      data.
    </td>
  </tr>
  <tr>
    <td>JavaScript Object Notation (JSON)</td>
    <td>
      An object-oriented, event-driven programming language that enables
      website interaction (as opposed to HTML, which simply displays
      information).
    </td>
  </tr>
  <tr>
    <td>Windows Management Instrumentation Command line (WMIC)</td>
    <td>
      A powerful command line tool for performing administrative tasks and
      is well suited to scripting and automation. WMIC is part of the
      Windows Management Instrumentation (WMI) framework.
    </td>
  </tr>
  <tr>
    <td>Python</td>
    <td>
      An interpreted, high-level, general-purpose programming language
      used for a wide variety of purposes.
    </td>
  </tr>
  <tr>
    <td>Regular expressions (regex)</td>
    <td>
      Powerful tool used in many programming languages for manipulating
      text and data.
    </td>
  </tr>
  <tr>
    <td>Software development life cycle</td>
    <td>
      Process that helps ensure that programs are functional and secure.
    </td>
  </tr>
  <tr>
    <td>Software assurance</td>
    <td>
      Customer confidence that software functions as it should and is free
      from exploitable vulnerabilities.
    </td>
  </tr>
  <tr>
    <td>Reverse engineering</td>
    <td>
      The process of deconstructing software to reveal its design and
      code.
    </td>
  </tr>
</tbody>
</table>

This section helps you prepare for the following certification exam objectives:

<table>
<thead></thead>
<thead>
  <tr>
    <th>Exam</th>
    <th>Objective</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>CompTIA CySA+ CS0-003</td>
    <td>
      1.3 Given a scenario, use appropriate tools or techniques to
      determine malicious activity
      <ul>
        <li>
          Programming languages/scripting
          <ul>
            <li>JavaScript Object Notation (JSON)</li>
            <li>Extensible Markup Language (XML)</li>
            <li>Python</li>
            <li>PowerShell</li>
            <li>Shell script</li>
            <li>Regular expressions</li>
          </ul>
        </li>
      </ul>
      <p>
        2.1 Given a scenario, implement vulnerability scanning methods and
        concepts
      </p>
      <ul>
        <li>
          Static vs. dynamic
          <ul>
            <li>Reverse engineering</li>
          </ul>
        </li>
      </ul>
      <p>
        2.5 Explain concepts related to vulnerability response, handling,
        and management
      </p>
      <ul>
        <li>
          Secure coding best practices
          <ul>
            <li>Input validation</li>
            <li>Output encoding</li>
            <li>Session management</li>
            <li>Authentication</li>
            <li>Data protection</li>
            <li>Parameterized queries</li>
          </ul>
        </li>
        <li>Secure software development life cycle (SDLC)</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>TestOut CyberDefense Pro</td>
    <td>
      4.3 Analyze Indicators of compromise
      <ul>
        <li>Examine applications for any signs of compromise</li>
      </ul>
    </td>
  </tr>
</tbody>
</table>

### 7.6.1 Programming and Scripting Overview

Click one of the buttons to take you to that part of the video.

Scripting Languages 00:00-02:27
Developing scripts is a useful skill for anyone in the IT field, as scripts can be developed to automate specific tasks that are performed on a regular basis. The script can be developed using a variety of languages and platforms based on the Operating System. In this lesson, we'll look at some of the different platforms and languages we can use in developing our scripts. We'll also look at some situations where developing scripts can be useful.

A script is typically a text file with commands written in a specific scripting language. These commands are usually human-readable, and they efficiently perform repetitive tasks and even complex, data-driven tasks.

Generally, a scripting language is interpreted in real-time, line by line. A typical program must be compiled before running, meaning the code's text must be converted into binary code. Scripting languages are usually something a human can look at and interpret, whereas binary code is much more difficult to read.

One of the more popular scripting languages used today is Python. Python is a high-level, general-purpose programming language that emphasizes easy-to-read code. Python is an extremely versatile language that can be used for various purposes. One of the great features of Python is the large number of libraries that can be used to help adapt Python to practically any purpose.

In the Linux and Unix world, shell scripting is used extensively for automation and maintenance. Although there are several languages that fall under the term "shell scripting," the most common form of shell scripting is the Bourne Shell (sh).

Other shells include the Bourne Again Shell (bash), the Korn Shell (ksh), and the Z Shell (zsh). Each shell has its own syntax variation, but all are directly related to the Bourne Shell.

On a Windows system, we'll use PowerShell to develop and run scripts. PowerShell is like bash but uses different commands and syntax. PowerShell uses cmdlets—small, executable functions built into the language—and wraps them together to perform tasks. PowerShell can be used to automate a variety of tasks, such as adding a large number of users into Active Directory by referencing the data in a spreadsheet.

Scripting languages are also used to develop content on the internet. JavaScript Object Notation, or JSON, is an object-oriented, event-driven programming language that enables website interaction. With web applications becoming more prevalent, JSON has become one of the more popular languages on the internet.

Extensible Markup Language, or XML, is also used extensively on the internet. XML uses tags like HTML but is used to transfer data, not display it as HTML does.

Scripting Uses 02:27-03:17
Scripts and scripting languages are used for many tasks, including developing web content, software development, and automating network and system management tasks.

Scripts can also be used by a security analyst to automate scanning logs or automating complicated tasks in command line tools like Nmap. Attackers will also use scripts to automate their scanning and enumeration processes to exploit vulnerable hosts.

Automation saves systems administrators a lot of time. If a task can be reduced to collecting data, then all an admin needs to do is run a script that performs a series of single operations repeatedly until the task is completed.

One common use of scripting is adding users to Active Directory. Instead of adding users one at a time, a PowerShell script will use the data in a spreadsheet to create the accounts, saving time and automating this process.

Summary 03:17-03:34
That'll wrap up this lesson on scripting. In this lesson, we looked at some of the more common scripting languages you should be aware of including Python, bash, PowerShell, JSON, and XML. We then went over some examples of how scripts can be used in various areas to automate tasks.

### 7.6.2 Shell Scripting Commands Facts

Scripts are great tools that anyone in the IT field can utilize to automate specific tasks that are performed on a regular basis. Scripts can be developed using a variety of languages and platforms based on the operating system.

This lesson covers the following topics:

- Shell scripts
- Shell commands
- Writing shell scripts

#### Shell Scripts

Shell scripts allow users and administrators to automate tasks using a scripting language like Bash or PowerShell. Shell scripts are perfect for repetitive or complicated tasks and are versatile, ranging from a few simple commands to highly complex programming structures.

Shell scripts are essential for automation and efficiency, and they can automate many tedious tasks that otherwise require slow and error-prone manual effort. For example, shell scripts are great for creating backups, automating software updates, performing software installations, and automating system maintenance.

Analysts can use shell scripts to locate important information stored in logs or automate complicated commands that depend on command line tools. For example, a script can use N map to find hosts with active ports 80 and 443 and then perform additional steps to collect more information about the discovered services before saving the results to a file.

Pen testers and attackers also leverage shell scripts to perform various tasks to enumerate hosts and networks or automate the steps required to exploit vulnerabilities. Linux and Unix operating systems use shell scripting extensively for automation and maintenance tasks. There are different variations of shells that are used in these systems, and each has its own syntax. The following table describes these shell command processor types:

<table>
<thead>
<tr>
  <th>Shell Processor Type</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Korn shell (ksh)</td>
  <td>
    Typically used on proprietary UNIX systems, such as IBM's AIX.
  </td>
</tr>
<tr>
  <td>Bourne shell (sh)</td>
  <td>
    A simple, lightweight shell found on most *nix systems and devices.
  </td>
</tr>
<tr>
  <td>C shell (csh)</td>
  <td>
    Often associated with proprietary UNIX, such as Oracle's Solaris.
  </td>
</tr>
<tr>
  <td>C shell (tcsh)</td>
  <td>An improved version of C shell, available for many platforms.</td>
</tr>
<tr>
  <td>Bourne Again shell (bash)</td>
  <td>An improved version of sh and very widely used.</td>
</tr>
<tr>
  <td>Z shell (zsh)</td>
  <td>
    Expands upon Bash shell and supports many plugins to expand its
    functionality.
  </td>
</tr>
</tbody>
</table>

#### Shell Commands

The following table lists some common Linux (and UNIX) commands and a brief description of their purpose.

<table>
<thead>
  <tr>
    <th>Shell Command</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>cat</td>
    <td>Display the content of a file.</td>
  </tr>
  <tr>
    <td>tail</td>
    <td>Display the last ten lines of a file.</td>
  </tr>
  <tr>
    <td>head</td>
    <td>Display the first ten lines of a file.</td>
  </tr>
  <tr>
    <td>touch</td>
    <td>Create an empty file.</td>
  </tr>
  <tr>
    <td>mkdir</td>
    <td>Create a directory.</td>
  </tr>
  <tr>
    <td>cp</td>
    <td>Copy a file or directory.</td>
  </tr>
  <tr>
    <td>mv</td>
    <td>
      Move an object, such as a file. Also used to rename files and
      directories.
    </td>
  </tr>
  <tr>
    <td>rm</td>
    <td>Remove a file or directory.</td>
  </tr>
  <tr>
    <td>file</td>
    <td>Determine the type of a file.</td>
  </tr>
  <tr>
    <td>ls</td>
    <td>Display the contents of a directory.</td>
  </tr>
  <tr>
    <td>locate</td>
    <td style="height: 20px">
      Search for files. Locate uses a database to improve the speed and
      efficiency of searches.
    </td>
  </tr>
  <tr>
    <td>find</td>
    <td>Search for files by parsing the file system.</td>
  </tr>
  <tr>
    <td>wget</td>
    <td>Simple command to retrieve content from an HTTP server.</td>
  </tr>
  <tr>
    <td>curl</td>
    <td>Similar to wget but includes more sophisticated options.</td>
  </tr>
</tbody>
</table>

The following table lists common administrative commands. These commands are particularly important, and their use should be closely monitored.

<table>
<thead>
  <tr>
    <th>Administrative Shell Command</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>vi/vim</td>
    <td>
      A file editor for use in a terminal. Very popular but nonintuitive
      to use.
    </td>
  </tr>
  <tr>
    <td>su</td>
    <td>Substitute or switch user.</td>
  </tr>
  <tr>
    <td>sudo</td>
    <td>Precedes a command that requires elevated privileges.</td>
  </tr>
  <tr>
    <td>useradd</td>
    <td>Create a user account.</td>
  </tr>
  <tr>
    <td>usermod</td>
    <td>Change the attributes of a user account.</td>
  </tr>
  <tr>
    <td>chmod</td>
    <td>
      Change the read, write, and execute attributes of a file or
      directory.
    </td>
  </tr>
  <tr>
    <td>chown</td>
    <td>Change permissions on a file or directory.</td>
  </tr>
  <tr>
    <td>mkfifo</td>
    <td>
      Similar in concept to a standard | style pipe but implemented as an
      actual file.
    </td>
  </tr>
</tbody>
</table>

#### Writing Shell Scripts

The use of vi and vim text editors has been a staple of Linux and UNIX administration for many decades. Understanding how to use this tool is important, but its learning curve is steep.

The nano text editor has been in active development for many years, and its adoption has increased in recent years. Nano provides a user-friendly and intuitive interface, as shown in the following screen capture.

![The nano text editor with the /etc/ssh/ssh_config file loaded.](/images/CyberDefensePro/nanoshell_7.6.2.jpg)

### 7.6.3 Bash Shell Variables and Loops Facts

Variables, loops, and other tools are used extensively in bash scripts. Proper utilization of these tools is vital in creating robust and powerful scripts.

This lesson covers the following topics:

- Variables
- Arithmetic
- Boolean operators
- If/Else statements
- Loops

#### Variables

Variables hold reusable values and are foundational to the use of scripts. In this example, a shell variable named SERVER has been created. The export command sets the variable within the current shell session.

The variable SERVER is created with a value of 10.0.2.26. The value saved to a variable can be recalled using the $ symbol. When reading the command, one way to remember this is to replace $ with "The value of." For the second line below, echo $SERVER can be translated as "echo the value of SERVER." On the third line, the SERVER variable is used with the ping command. Notice that the value of SERVER is displayed in the command output.

![Example of variable in use](/images/CyberDefensePro/variables_7.6.3.jpg)

Variable values can be set dynamically. In the example below, a script named script.sh is written using the nano text editor. Afterward, the chmod command is used to set the execute attribute on the script, allowing it to be easily used.
On the third line below, the cat command displays the content of the script file. The script contains the following four lines:

1. The shebang identifying as a bash script
2. Echo a prompt for a name
3. Saving user-typed input to the variable NAME
4. Echo a response, including the user-provided value

![Example of shell script](/images/CyberDefensePro/script_7.6.3.jpg)

#### Arithmetic

Shell scripts support many mathematical operations. Shells like bash must incorporate a few special conventions in order to perform arithmetic. For example, the expr command is needed when performing arithmetic.

The script below shows the use of variables and arithmetic. The variables num1 & num2 hold values supplied by the user, and the variable sum is used to store the result of adding them together. Notice that the arithmetic operation is contained with back quotes (sometimes called ticks). The back quote resembles a single quote but is not the same. The back quote key is typically located on the top-left corner of the keyboard.

![Example of shell script using arithmetic expressions](/images/CyberDefensePro/arithmetic_7.6.3.jpg)

The following table shows the different arithmetic operators.

<table>
<thead>
  <tr>
    <th>Operator</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>+</td>
    <td>Addition</td>
  </tr>
  <tr>
    <td>-</td>
    <td>Subtraction</td>
  </tr>
  <tr>
    <td>*</td>
    <td>Multiplication</td>
  </tr>
  <tr>
    <td>/</td>
    <td>Division</td>
  </tr>
  <tr>
    <td>%</td>
    <td>Modulus</td>
  </tr>
</tbody>
</table>

#### Boolean Operators

Boolean operators are used to perform comparisons. For example, the statement var1 = var2 would assign the value of var2 to the variable var1. This is a problem if the intent is just to determine equivalency. The correct syntax to compare values is var1 = = var2. If they are the same, the result is "true;" if not, the result is false.

The following table describes some common boolean operators:

<table>
<thead>
<tr>
  <th>Boolean Operator</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td> ==</td>
  <td>Is equal to</td>
</tr>
<tr>
  <td>!=</td>
  <td>Is not equal to</td>
</tr>
<tr>
  <td>-eq</td>
  <td>Alternative form of "is equal to"</td>
</tr>
<tr>
  <td>-ne</td>
  <td>Alternative form of "is not equal to"</td>
</tr>
<tr>
  <td>-gt</td>
  <td>Greater than</td>
</tr>
<tr>
  <td>-lt</td>
  <td>Less than</td>
</tr>
<tr>
  <td>-ge</td>
  <td>Greater than or equal to</td>
</tr>
<tr>
  <td>-le</td>
  <td>Less than or equal to</td>
</tr>
</tbody>
</table>

#### If/Else Statements

Boolean operators are important for decision-making in a shell script. Comparisons are used to create decision branches which help steer the direction of the script's commands.

If/Else statements help identify a course of action based on a set of comparisons. Multiple comparisons incorporate an `if/elif/else` format, as shown in the following example. Notice that the boolean c omparisons are contained within square brackets , and there are spaces between the brackets and the c omparison statement. This script prompts the user for a number and compares it to the number 100, which is saved in the mynum variable. The script displays a different message depending on the results of the comparison.

![Example of shell script using if/else statements](/images/CyberDefensePro/ifelse_7.6.3.jpg)

#### While Loops

In the previous example, the script needed to be rerun each time we wanted to play the game. What if a player wanted to make several guesses to try and determine the "secret" number without needing to relaunch the script each time?
A while loop will continue processing a series of commands until a predetermined condition is met. In the following example, the `If/Else` script is contained within a simple `while/done` loop. The `If/Else` portion of the program will continue to run until the user presses the CTRL-C key combination.

![Example of shell script using while loops](/images/CyberDefensePro/while1_7.6.3.jpg)

The following shows how the program operates when started. Notice that the script does not need to be restarted after each guess because of the while loop.

![Example of shell script using while loops](/images/CyberDefensePro/while2_7.6.3.jpg)

### 7.6.4 Metacharacters, Quotes, and Redirection Facts

This lesson covers the following topics:

- Metacharacters
- Command substitution
- Redirection

#### Metacharacters

Metacharacters are characters that have special meaning to a computer program, such as a shell. Metacharacters include:

- `New line`, `space`, `& tab`
- The characters `\* ? [ ] ' " \ $ ; & ( ) | ^ < >`

If a metacharacter needs to be used as a normal character, problems can arise. The following examples shows different ways to manage metacharacters:

![Examples of metacharacters](/images/CyberDefensePro/meta_7.6.4.jpg)

- In the first example, the metacharacter problem is shown as the cost of the taco not being displayed.
- In the second example, the escape character `\` is used to instruct the shell to translate the $ as a character and not as a metacharacter. The result is that the cost of the taco is successfully displayed.
- The third and fourth examples show the impact of quotes. The third example shows that text contained within single quotes is interpreted as text only, even if metacharacters are included.
- The fourth example shows that double quotes preserve the meaning of metacharacters contained within them.
- Lastly, the use of back quotes allows the result of a command to be displayed. Notice that when the **`date +%A`** command is contained within single quotes, the characters are displayed instead of the result of the command. (The result of the **date +%A** command is to display the current day of the week.) When the **`date +%A`** command is contained within double quotes, the back quotes are interpreted differently.

#### Command Substitution

Variables can also be used to store commands. The following example shows how this is accomplished. Notice that the commands are contained within back quotes.

![Examples of metacharacters](/images/CyberDefensePro/meta_2_7.6.4.jpg)

#### Redirection

Redirection allows for the output of commands to be sent to other locations, such as a file or another program. The following example shows the output of an Nmap scan being redirected to a file. Nmap provides native output redirection capabilities too, but its standard output is being used as an example here.

The redirection character `>` is being used to send the output of the Nmap scan to a file named _scan_output.txt_ . Notice that when the command is rerun to scan a different port, the _scan_output.txt_ file is overwritten with the new results.

![Examples of metacharacters](/images/CyberDefensePro/redirection1_7.6.4.jpg)

To append output to a file, the `>>` characters must be used. Notice in the following example how the second scan uses the `>>` characters to append the new results to the end of the file, preserving the original content.

![Examples of metacharacters](/images/CyberDefensePro/redirection2_7.6.4.jpg)

### 7.6.5 Windows PowerShell Facts

Developing and executing scripts in Windows is done using PowerShell. PowerShell is similar to other shell programs but uses its own commands and syntax. PowerShell is built on the .NET framework and uses cmdlets, which are small executable functions built into the PowerShell language.

This lesson covers Windows PowerShell:
